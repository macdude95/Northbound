# GitHub Actions Email Setup Guide

This guide shows how to set up automated daily portfolio allocation emails using GitHub Actions (completely free).

## üöÄ Quick Setup (10 minutes)

### Step 1: Push Code to GitHub

Ensure your repository is pushed to GitHub with the `.github/workflows/daily-allocations.yml` file.

### Step 2: Set Up Gmail App Password

1. **Enable 2-Factor Authentication** on your Gmail account (if not already enabled)
2. **Generate App Password**:
   - Go to [Google Account Settings](https://myaccount.google.com/)
   - Security ‚Üí 2-Step Verification ‚Üí App passwords
   - Select "Mail" and "Other (custom name)"
   - Enter "GitHub Actions" as the name
   - Copy the 16-character password

### Step 3: Configure GitHub Secrets

In your GitHub repository:

1. Go to **Settings** ‚Üí **Secrets and variables** ‚Üí **Actions**
2. Add these secrets:

| Secret Name          | Value                  | Description                 |
| -------------------- | ---------------------- | --------------------------- |
| `GMAIL_USERNAME`     | `your-email@gmail.com` | Your Gmail address          |
| `GMAIL_APP_PASSWORD` | `abcd-efgh-ijkl-mnop`  | The 16-char app password    |
| `EMAIL_ADDRESS`      | `your-email@gmail.com` | Where to send notifications |
| `POLYGON_API_KEY`    | `your-polygon-key`     | For market data access      |

### Step 4: Configure Your Strategies

Edit `.github/workflows/daily-allocations.yml` line 40 to set your desired strategy allocations:

```yaml
# Change this line to match your preferred strategies
output=$(python scripts/get_allocations.py qqq_momentum_simple:60 qqq_momentum_gradient:40 2>&1)
```

**Examples:**

```bash
# Single strategy
python scripts/get_allocations.py qqq:100

# Multiple strategies
python scripts/get_allocations.py qqq_momentum_simple:70 qqq_momentum_gradient:30

# Three strategies
python scripts/get_allocations.py strategy_a:40 strategy_b:35 strategy_c:25
```

### Step 5: Test the Workflow

1. **Manual Trigger**: Go to Actions ‚Üí "Daily Portfolio Allocations" ‚Üí "Run workflow"
2. **Check Results**: The workflow will run and send you an email
3. **Monitor Logs**: Check the workflow logs for any issues

## üìß What You'll Receive

**Subject:** `Daily Portfolio Allocations - 2026-01-15`

**Email Body:**

```
Good morning! Here are your daily portfolio allocation recommendations:

Final Portfolio Allocation:

Full Details:
Portfolio Allocations for 2026-01-15
============================================================

qqq_momentum_simple (60.0% of portfolio):
  - SQQQ: 100.00%

qqq_momentum_gradient (40.0% of portfolio):
  - SQQQ: 53.35%
  - TQQQ: 46.65%

Final Portfolio Allocation:
------------------------------
- SQQQ: 81.34%
- TQQQ: 18.66%

--
Generated by Northbound Trading System
NYSE Open: 2026-01-15 9:30 AM ET
```

## üïê Schedule

- **Runs**: Monday-Friday at 9:30 AM Eastern Time (NYSE open)
- **Timezone**: Eastern Time (ET)
- **Cron**: `30 14 * * 1-5` (14:30 UTC = 9:30 AM ET)

## üõ†Ô∏è Troubleshooting

### Email Not Sending

1. Check GitHub secrets are set correctly
2. Verify Gmail app password is valid
3. Check workflow logs for SMTP errors

### Strategy Errors

1. Ensure strategy config files exist in `strategy_configs/`
2. Check that required market data is available
3. Verify POLYGON_API_KEY is working

### Manual Testing

```bash
# Test locally first
python scripts/get_allocations.py qqq_momentum_simple:60 qqq_momentum_gradient:40
```

## üîí Security Notes

- **App Passwords**: Gmail app passwords are separate from your main password
- **Secrets**: GitHub secrets are encrypted and only accessible to this repository
- **API Keys**: Polygon.io provides generous free tier limits

## üìä Customization

### Change Email Content

Edit the email body in `.github/workflows/daily-allocations.yml`:

```yaml
BODY="Good morning! Here are your daily portfolio allocation recommendations:

${{ steps.allocations.outputs.summary }}

Full Details:
${{ steps.allocations.outputs.full_output }}

--
Generated by Northbound Trading System
NYSE Open: $(date +%Y-%m-%d) 9:30 AM ET"
```

### Change Schedule

Modify the cron expression:

```yaml
schedule:
  - cron: '30 14 * * 1-5' # 9:30 AM ET Mon-Fri
```

### Add Recipients

Add multiple email addresses:

```yaml
To: recipient1@example.com, recipient2@example.com
```

## üéØ Next Steps

1. **Test the workflow** with manual trigger
2. **Verify email delivery** in your inbox/spam folder
3. **Monitor Monday morning** for the first automated email
4. **Adjust strategies** as needed based on performance

The system will now automatically email you every trading day with your personalized portfolio allocation recommendations! üìà
